name: Update Profile Stats

on:
  schedule:
    - cron: "0 * * * *"
  workflow_dispatch:

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Generate stats SVG
        run: |
          echo '<svg width="400" height="80" xmlns="http://www.w3.org/2000/svg">
            <rect width="100%" height="100%" fill="#020617"/>
            <text x="20" y="30" fill="#e5e7eb" font-size="14">GitHub Stats</text>
            <text x="20" y="55" fill="#9ca3af" font-size="12">
              Followers, repos, stars are intentionally not gamified.
            </text>
          </svg>' > assets/stats.svg

      - name: Commit changes
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add assets/stats.svg
          git commit -m "chore: update stats svg" || exit 0
          git push